<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Oś czasu życia Johanna Sebastiana Bacha</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      margin: 0;
    }
    #timeline svg {
      background: #fff;
      border: 1px solid #ccc;
    }
    .tooltip {
      position: absolute;
      background: #fff;
      border: 1px solid #ccc;
      padding: 5px;
      pointer-events: none;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1>Oś czasu życia Johanna Sebastiana Bacha</h1>
  <div id="timeline"></div>
  <script>
    fetch('timeline_data.json')
      .then(response => response.json())
      .then(data => {
        const margin = {top: 20, right: 20, bottom: 30, left: 40};
        const width = 1000 - margin.left - margin.right;
        const height = 200 - margin.top - margin.bottom;

        const svg = d3.select('#timeline')
          .append('svg')
          .attr('width', width + margin.left + margin.right)
          .attr('height', height + margin.top + margin.bottom)
          .append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);

        const x = d3.scaleLinear()
          .domain(d3.extent(data, d => d.year))
          .range([0, width]);

        svg.append('g')
          .attr('transform', `translate(0,${height})`)
          .call(d3.axisBottom(x).tickFormat(d3.format('d')));

        const tooltip = d3.select('body')
          .append('div')
          .attr('class', 'tooltip')
          .style('display', 'none');

        svg.selectAll('circle')
          .data(data)
          .enter()
          .append('circle')
          .attr('cx', d => x(d.year))
          .attr('cy', height / 2)
          .attr('r', 4)
          .attr('fill', 'steelblue')
          .on('mouseover', (event, d) => {
            tooltip
              .style('display', 'block')
              .html(`<strong>${d.year}</strong>: ${d.event || '(brak wydarzeń)'}`)
              .style('left', (event.pageX + 5) + 'px')
              .style('top', (event.pageY - 28) + 'px');
          })
          .on('mouseout', () => tooltip.style('display', 'none'));
      });
  </script>
</body>
</html>
